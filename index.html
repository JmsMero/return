<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>返回键</title>
  <script src="./xback.js"></script>
  <script>
    var getAD = 0;
    gameTool.backBtnListen.setListen(function() {
      // 判断是否配置返回发券样式
      if (backBtnData.backCouponType == 'null') {
        // 未配置返回发券样式时执行去返回键落地页操作
        gameTool.doBackInteractive();
      } else {
        if (getAD > 0) {
          if (backBtnData.backCouponNum == getAD) {
            // 继续监返回键
            gameTool.backBtnListen.listenContinue(function(){
              // 执行去返回键落地页操作
              gameTool.doBackInteractive();
            });
          } else {
            // 执行去返回键落地页操作
            gameTool.doBackInteractive();
          };
        } else {
          // 继续监返回键
          gameTool.backBtnListen.listenContinue(function(){
            // 执行去返回键落地页操作
            window.removeEventListener('popstate', this.backChange, false);//false阻止默认事件
            gameTool.doBackInteractive();
          });
        };
      };
    });
    function backChange() {
      const that = this;
      alert("取消监听事件！");
    }

  </script>
</head>
<body>
  我是页面1
</body>
</html>
